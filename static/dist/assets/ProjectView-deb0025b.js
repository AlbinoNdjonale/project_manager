import{_ as G,q as se,a as v,c as _,d as e,i as k,F as I,m as q,v as L,b as E,t as m,p as H,f as O,l as le,x as oe,g as ne,r as g,y as ie,o as ae,n as j,h as de,k as S,w as ce,j as ue,z as x,A as P,B as M,C as re,u as z}from"./index-4086a49a.js";import{H as ve,F as pe}from"./Footer-0ba9e20d.js";import{_ as _e,C as N,a as be}from"./ManipulateProject-4b9db71a.js";import{c as U}from"./index-e096127b.js";const ye=a=>(H("data-v-c577bc39"),a=a(),O(),a),me={key:0},ke={class:"wrapper"},fe={class:"opt"},he=ye(()=>e("p",{class:"subitem"},"-",-1)),$e={key:0,class:"wrapper-1"},ge=["onClick"],Ce=["onClick"],we=["onClick"],je=["onClick"],Ae={class:"in-obj"},xe={class:"attr"},De=["id"],Se=["id"],Ee={class:"wrapper"},Ve={class:"opt"},Ie=["onClick"],qe=["onDblclick"],Be={key:0,class:"wrapper-1"},Fe=["onClick"],Me=["onClick"],Ne=["onClick"],Ue={class:"in-obj"},Le={key:2},Pe={class:"wrapper"},ze=["id","value"],Ge=["id"],He={key:0,class:"opt"},Oe={__name:"Detail",props:{details:{required:!0},update:{type:Function,required:!0},key_:{type:String,default:null},remove_item_:{type:Function},global:{type:String,default:""}},setup(a){const o=a,D=p=>{const n={};for(const s in o.details)s!==p&&(n[s]=o.details[s]);o.update(n,o.key_)},B=p=>{const n=document.getElementById(`p-key-${p.replaceAll(" ","-")}-${o.global}`),s=document.getElementById(`input-key-${p.replaceAll(" ","-")}-${o.global}`);n.style.display="none",s.style.display="block",s.value=p,s.focus();const i=r=>{if(!(r.key&&r.key!=="Enter")&&(n.style.display="block",s.style.display="none",p!==s.value.trim())){const d=s.value.trim(),y={};for(const w in o.details)w==p&&o.details[d]==null?y[d]=o.details[w]:y[w]=o.details[w];o.update(y,o.key_)}};s.addEventListener("focusout",i),s.addEventListener("keypress",i)},b=p=>{const n=document.getElementById(`p-value-${p.replaceAll(" ","-")}-${o.global}`),s=document.getElementById(`input-value-${p.replaceAll(" ","-")}-${o.global}`);n.style.display="none",s.style.display="block";const i=s.value.trim();s.focus();const r=d=>{if(!(d.key&&d.key!=="Enter")&&(n.style.display="block",s.style.display="none",i!==s.value.trim())){const y=s.value.trim();o.update(y,o.key_)}};s.addEventListener("focusout",r),s.addEventListener("keypress",r)},h=p=>{const n=[];for(const s in o.details)s!=p&&n.push(o.details[s]);o.update(n,o.key_)},c=(p,n)=>{const s=Array.isArray(o.details)?[]:{};for(const i in o.details)i==n?s[i]=p:s[i]=o.details[i];o.update(s,o.key_)},$=(p,n,s={})=>{const i=o.details[n];let r=1,d="novo campo";for(;i[d]!==void 0;)d=`novo campo${r}`,r++;i[d]=p;for(const y in o.details)Array.isArray(s)?y==n?s.push(i):s.push(o.details[y]):y==n?s[y]=i:s[y]=o.details[y];o.update(s,o.key_)},V=p=>{const n=[];for(const s in o.details)s!=p&&n.push(o.details[s]);o.update(n,o.key_)},C=p=>{const n=[];for(const s in o.details)n.push(o.details[s]);n.push(p),o.update(n,o.key_)};return(p,n)=>{const s=se("Detail",!0);return Array.isArray(a.details)?(v(),_("div",me,[e("div",ke,[e("div",fe,[a.remove_item_?(v(),_("button",{key:0,class:"btn-rm",onClick:n[0]||(n[0]=i=>a.remove_item_(a.key_))})):k("",!0),e("button",{class:"btn-add",onClick:n[1]||(n[1]=i=>C("item"))}),e("button",{class:"btn-add-list",onClick:n[2]||(n[2]=i=>C([]))}),e("button",{class:"btn-add-super",onClick:n[3]||(n[3]=i=>C({}))})]),he]),e("ul",null,[(v(!0),_(I,null,q(a.details,(i,r)=>(v(),_("li",null,[e("div",{class:L(typeof i=="object"&&i!==null&&!Array.isArray(i)?"obj":"")},[typeof i=="object"&&i!==null&&!Array.isArray(i)?(v(),_("div",$e,[e("div",null,[e("button",{class:"btn-rm",onClick:d=>V(r)},null,8,ge),e("button",{class:"btn-add",onClick:d=>$("valor",r,[])},null,8,Ce),e("button",{class:"btn-add-list",onClick:d=>$([],r,[])},null,8,we),e("button",{class:"btn-add-super",onClick:d=>C({})},null,8,je)])])):k("",!0),e("div",Ae,[E(s,{global:`${a.global}-${a.key_}`,remove_item_:h,details:i,key_:r.toString(),update:c},null,8,["global","details","key_"])])],2)]))),256))])])):typeof a.details=="object"&&a.details!==null?(v(!0),_(I,{key:1},q(a.details,(i,r)=>(v(),_("div",xe,[e("input",{style:{display:"none"},id:`input-key-${r.replaceAll(" ","-")}-${a.global}`,class:"key"},null,8,De),e("div",{id:`p-key-${r.replaceAll(" ","-")}-${a.global}`},[e("div",Ee,[e("div",Ve,[e("button",{class:"btn-rm",onClick:d=>D(r)},null,8,Ie)]),e("p",{onDblclick:d=>B(r),class:"key"},m(r),41,qe)])],8,Se),e("div",{class:L(typeof i=="object"&&i!==null&&!Array.isArray(i)?"obj":"")},[typeof i=="object"&&i!==null&&!Array.isArray(i)?(v(),_("div",Be,[e("div",null,[e("button",{class:"btn-add",onClick:d=>$("valor",r)},null,8,Fe),e("button",{class:"btn-add-list",onClick:d=>$([],r)},null,8,Me),e("button",{class:"btn-add-super",onClick:d=>$({},r)},null,8,Ne)])])):k("",!0),e("div",Ue,[E(s,{global:`${a.global}-${a.key_}`,details:i,key_:r,update:c},null,8,["global","details","key_"])])],2)]))),256)):(v(),_("div",Le,[e("div",Pe,[e("input",{style:{display:"none"},id:`input-value-${a.key_.replaceAll(" ","-")}-${a.global}`,value:a.details},null,8,ze),e("div",{id:`p-value-${a.key_.replaceAll(" ","-")}-${a.global}`},[a.remove_item_?(v(),_("div",He,[e("button",{onClick:n[4]||(n[4]=i=>a.remove_item_(a.key_)),class:"btn-rm"})])):k("",!0),e("p",{onDblclick:n[5]||(n[5]=i=>b(a.key_)),class:"value"},m(a.details),33)],8,Ge)])]))}}},Te=G(Oe,[["__scopeId","data-v-c577bc39"]]);const f=a=>(H("data-v-02558678"),a=a(),O(),a),Re={key:0},Je={key:0},Ke={id:"project-prophile",class:"card"},Qe={id:"description",class:"mb"},We={class:"mb"},Xe=["checked"],Ye={id:"info",class:"mb"},Ze={key:0},et={key:1},tt={class:"opitions"},st={id:"authors"},lt=f(()=>e("h2",null,"Autores",-1)),ot={class:"card"},nt={class:"mb1"},it={class:"mb1"},at={class:"mb1"},dt={class:"mb1"},ct={class:"opitions"},ut=["onClick"],rt={id:"details"},vt={class:"wrapper"},pt={id:"opt"},_t={id:"content"},bt={key:0,id:"invite"},yt={key:1,id:"invite-form",class:"wp-dialog"},mt={class:"top"},kt=f(()=>e("h2",null,"Gerenciamento de Links",-1)),ft=f(()=>e("label",{for:"write"},"Permissão de escrita",-1)),ht=f(()=>e("section",null,[e("button",{class:"btn-add"},"gerar link")],-1)),$t={id:"list-link"},gt=f(()=>e("label",{for:""},"Permissão de escrita",-1)),Ct=["onUpdate:modelValue"],wt=["onClick"],jt=["onClick"],At=["href"],xt={key:2,class:"wp-dialog",id:"dialog-add-author"},Dt={class:"top"},St=f(()=>e("h2",null,"Adicionar Autor",-1)),Et=f(()=>e("label",{for:"name"},"Nome",-1)),Vt=f(()=>e("label",{for:"email"},"E-mail",-1)),It=f(()=>e("label",{for:"birth"},"Data de Nascimento",-1)),qt=f(()=>e("label",{for:"gender"},"Genero",-1)),Bt=f(()=>e("option",{value:"M"},"M",-1)),Ft=f(()=>e("option",{value:"F"},"F",-1)),Mt=[Bt,Ft],Nt=f(()=>e("section",null,[e("button",{type:"submit",class:"btn-add"},"confirmar")],-1)),Ut={key:1},Lt=f(()=>e("h2",null,"Pagina Não encontrada",-1)),Pt=[Lt],zt={__name:"ProjectView",props:{project_id:{type:String},link:{type:String},invite:{default:!1}},setup(a){const o=document.location.origin,D=le(),B=oe(),b=ne(),h=a,c=g({}),$=g(!1),V=g(!1),C=g(!1),p=g(!1),n=g(!1),s=g(!1),i=g(!1),r=g(!1),d=ie({id:"",name:"",email:"",gender:"M",birth:""}),y=g({}),w=(u="",t="")=>h.invite?`${u}invite/${h.link}${t}`:"";ae(async()=>{b.set(!0);const u=await j.get(h.invite?`/api/v1/projects/invite/${h.link}`:`/api/v1/projects/${h.project_id}`,()=>b.set(!1));u.id?(U.update_title(u.title),c.value=u,y.value=await j.get(`/api/v1/details${w("/")}/${c.value.id}`)):V.value=!0});const T=de(()=>U.formatnumber(c.value.budget)),R=async u=>{b.set(!0);const t=await j.update(h.invite?`/api/v1/projects/invite/${h.link}`:`/api/v1/projects/${c.value.id}`,u,!1,()=>b.set(!1));if(t.id){if(c.value=t,!h.invite){for(let l=0;l<D.user.projects.length;l++)if(D.user.projects[l].id==c.value.id){D.user.projects[l]=c.value;break}}C.value=!1}else console.log(t)},J=async()=>{$.value=!1,b.set(!0),await U.deleteproject(c.value.id,()=>b.set(!1))&&B.replace("/projects")},K=async()=>{i.value=!1,b.set(!0);const u=await j.post(`/api/v1/authors/${w()}`,{name:d.name,email:d.email,gender:d.gender,birth:d.birth,project_id:c.value.id},!1,()=>b.set(!1));u.id?(u.gender=u.gender.value,c.value.authors.push(u),d.name="",d.email="",d.gender="M",d.birth="",p.value=!1):console.log(u)},Q=u=>{u.preventDefault(),i.value=!0},W=async()=>{r.value=!1,b.set(!0);const u=await j.delete(`/api/v1/authors${w("/")}/${d.id}`,()=>b.set(!1));u.id&&(c.value.authors=c.value.authors.filter(t=>t.id!=u.id))},F=u=>{let t=1,l="novo campo";for(;y.value[l]!==void 0;)l=`novo campo${t}`,t++;y.value[l]=u},X=(u,t)=>{y.value=u},Y=async()=>{b.set(!0),y.value=await j.update(`/api/v1/details${w("/")}/${c.value.id}`,y.value,!1,()=>b.set(!1))},Z=async u=>{u.preventDefault(),b.set(!0);const t=await j.post("/api/v1/links/",{write:s.value,project_id:parseInt(h.project_id)},!1,()=>b.set(!1));t.id?(c.value.links.push(t),s.value=!1):console.log(t)},ee=async u=>{b.set(!0);const t=await j.delete(`/api/v1/links/${u}`,()=>b.set(!1));t.id?c.value.links=c.value.links.filter(l=>u!=l.id):console.log(t)},te=async(u,t)=>{b.set(!0);const l=await j.update(`/api/v1/links/${u}`,{write:t},!1,()=>b.set(!1));l.id?c.value.links=c.value.links.map(A=>u!=A.id?A:l):console.log(l)};return(u,t)=>(v(),S(_e,{ignore:a.invite},{default:ce(()=>[V.value?(v(),_("div",Ut,Pt)):(v(),_("div",Re,[E(ve),c.value.id?(v(),_("main",Je,[e("section",Ke,[e("h2",null,m(c.value.title),1),e("p",Qe,m(c.value.description),1),e("p",We,[ue(" feito: "),e("input",{type:"checkbox",disabled:"",checked:c.value.is_completed},null,8,Xe)]),e("div",Ye,[c.value.started?(v(),_("span",Ze,"Data: "+m(c.value.started.day)+"."+m(c.value.started.month)+"."+m(c.value.started.year),1)):k("",!0),c.value.budget?(v(),_("span",et,"Orçamento: "+m(T.value),1)):k("",!0)]),e("div",tt,[e("button",{onClick:t[0]||(t[0]=()=>{$.value=!a.invite}),class:"btn-del"},"Deletar"),e("button",{onClick:t[1]||(t[1]=()=>{C.value=!0}),class:"btn-edi"},"Editar"),$.value?(v(),S(N,{key:0,yes:J,not:()=>{$.value=!1}},null,8,["not"])):k("",!0),C.value?(v(),S(be,{key:1,action:"Editar",event:R,close:()=>{C.value=!1},project:c.value},null,8,["close","project"])):k("",!0)])]),e("section",st,[lt,e("section",null,[e("button",{onClick:t[2]||(t[2]=()=>{p.value=!0}),id:"add",class:"card"}," + "),(v(!0),_(I,null,q(c.value.authors,l=>(v(),_("div",ot,[e("h3",nt,m(l.name),1),e("p",it,m(l.email),1),e("p",at,"Nascimento: "+m(l.birth.day)+"."+m(l.birth.month)+"."+m(l.birth.year),1),e("p",dt,"genero: "+m(l.gender),1),e("div",ct,[e("button",{onClick:()=>{r.value=!0,d.id=l.id},class:"btn-del"},"deletar",8,ut)])]))),256))])]),e("section",rt,[e("div",null,[e("div",vt,[e("button",{class:"btn-save-detail",onClick:Y},"salvar"),e("div",pt,[e("button",{onClick:t[3]||(t[3]=l=>F("valor")),class:"btn-add-detail"},"add"),e("button",{onClick:t[4]||(t[4]=l=>F([])),class:"btn-add-detail-list"},"add. lista"),e("button",{onClick:t[5]||(t[5]=l=>F({})),class:"btn-add-detail-super"},"super add")])]),e("div",_t,[E(Te,{update:X,details:y.value},null,8,["details"])])])]),a.invite?k("",!0):(v(),_("section",bt,[e("button",{onClick:t[6]||(t[6]=()=>{n.value=!0})},"convidar")])),n.value?(v(),_("section",yt,[e("dialog",null,[e("div",null,[e("div",mt,[kt,e("button",{onClick:t[7]||(t[7]=()=>{n.value=!1}),class:"btn-close"})]),e("form",{onSubmit:Z},[e("section",null,[ft,x(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>s.value=l),type:"checkbox"},null,512),[[P,s.value]])]),ht],32),e("section",$t,[(v(!0),_(I,null,q(c.value.links,l=>(v(),_("div",null,[e("div",null,[e("div",null,[gt,x(e("input",{"onUpdate:modelValue":A=>l.write=A,type:"checkbox"},null,8,Ct),[[P,l.write]])]),e("div",null,[e("small",null,[e("button",{onClick:A=>te(l.id,l.write),class:"btn-add-detail"},"salvar",8,wt)]),e("small",null,[e("button",{onClick:A=>ee(l.id),class:"btn-rm"},"remover",8,jt)])])]),e("small",null,[e("a",{href:`${z(o)}/projects/invites/${l.value}`,target:"blanck"},m(z(o))+"/projects/invites/"+m(l.value),9,At)])]))),256))])])])])):k("",!0),p.value?(v(),_("section",xt,[e("dialog",null,[e("form",{onSubmit:Q},[e("div",Dt,[St,e("button",{onClick:t[9]||(t[9]=()=>{p.value=!1}),type:"button",class:"btn-close"})]),e("section",null,[Et,x(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=l=>d.name=l),id:"name",required:""},null,512),[[M,d.name]])]),e("section",null,[Vt,x(e("input",{type:"email","onUpdate:modelValue":t[11]||(t[11]=l=>d.email=l),id:"email",required:""},null,512),[[M,d.email]])]),e("section",null,[It,x(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=l=>d.birth=l),id:"birth",required:""},null,512),[[M,d.birth]])]),e("section",null,[qt,x(e("select",{id:"gender","onUpdate:modelValue":t[13]||(t[13]=l=>d.gender=l),required:""},Mt,512),[[re,d.gender]])]),Nt],32)])])):k("",!0),i.value?(v(),S(N,{key:3,yes:K,not:()=>{i.value=!1}},null,8,["not"])):k("",!0),r.value?(v(),S(N,{key:4,yes:W,not:()=>{r.value=!1}},null,8,["not"])):k("",!0)])):k("",!0),E(pe)]))]),_:1},8,["ignore"]))}},Rt=G(zt,[["__scopeId","data-v-02558678"]]);export{Rt as default};
